<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="noticeMapper">

	<sql id="selectNotice">
		SELECT
				NOTICE_NO noticeNo,
	            NOTICE_TITLE noticeTitle,
	            NOTICE_CONTENT noticeContent,
	            NOTICE_DATE noticeDate,
				MEM_ID memId
	</sql>


<select id="noticeCount" resultType="_int">
	SELECT 
			COUNT(NOTICE_NO)
	  FROM
	  		NOTICE

</select>	

<select id="noticeFindAll" resultType="notice" parameterType="map">
	
	<include refid="selectNotice"/>
  	  FROM
            (SELECT 
                    NOTICE_NO,
                    NOTICE_TITLE,
                  	NOTICE_CONTENT,
                    NOTICE_DATE,
                 	MEM_ID,
                    ROWNUM RNUM 
              FROM
                   	 (SELECT 
                             NOTICE_NO,
                             NOTICE_TITLE,
                             NOTICE_CONTENT,
                             NOTICE_DATE,
							 MEM_ID
                        FROM
                             NOTICE                            
                       ORDER
                          BY
                             NOTICE_NO DESC))               
WHERE
      RNUM BETWEEN #{startValue} AND #{endValue} 
	</select>
	
<select id="searchCount" parameterType="hashmap" resultType="int">
		SELECT
        		COUNT(NOTICE_NO)
		  FROM
		        NOTICE
		 WHERE  
		  <if test="condition == 'writer'">      
		        MEM_ID LIKE '%' || #{keyword} || '%'
	      </if>
		  <if test="condition == 'title'">
		   		NOTICE_TITLE LIKE '%' || #{keyword} || '%'
		  </if>
		  <if test="condition == 'content'">
		   		NOTICE_CONTENT LIKE '%' || #{keyword} || '%'
		  </if>
	</select>


</mapper>